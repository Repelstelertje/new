---
import { PROVINCES, provinceToSlug } from "../lib/provinces";

const { siteName = "OproepjesNederland" } = Astro.props as {
  siteName?: string;
};

const provinces = [...PROVINCES].sort((a, b) => a.localeCompare(b, "nl"));
---

<header class="bg-white border-b border-neutral-200 text-neutral-900" role="banner">
  <a
    href="#main-content"
    class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 bg-white px-3 py-2 rounded-md shadow"
  >
    Sla over naar hoofdinhoud
  </a>

  <div class="mx-auto max-w-6xl px-4 py-4 flex items-center justify-between gap-6">
    <!-- Logo/titel (18+ badge NIET hier) -->
    <a href="/" aria-label={`${siteName} homepage`} class="flex items-center gap-3 font-semibold">
      <span class="text-xl">{siteName}</span>
    </a>

    <!-- Navigatie -->
    <nav aria-label="Hoofdnavigatie">
      <ul class="flex items-center gap-2">
        <!-- Provincies dropdown -->
        <li class="relative">
          <details class="group">
            <summary
              class="cursor-pointer list-none rounded-md px-3 py-2 text-sm font-medium hover:bg-neutral-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600"
              aria-haspopup="menu"
            >
              Provincies
            </summary>
            <div
              role="menu"
              class="absolute right-0 z-20 mt-2 w-56 rounded-xl border border-neutral-200 bg-white p-2 shadow-lg"
            >
              <ul class="max-h-[60vh] overflow-auto">
                {provinces.map((name) => {
                  const slug = provinceToSlug(name);
                  return (
                    <li>
                      <a
                        role="menuitem"
                        href={`/dating-${slug}/`}
                        class="block rounded-md px-3 py-2 text-sm hover:bg-neutral-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600"
                        aria-label={`Bekijk profielen in ${name}`}
                      >
                        {name}
                      </a>
                    </li>
                  );
                })}
              </ul>
            </div>
          </details>
        </li>

        <!-- Datingtips dropdown (placeholder-links) -->
        <li class="relative">
          <details class="group">
            <summary
              class="cursor-pointer list-none rounded-md px-3 py-2 text-sm font-medium hover:bg-neutral-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600"
              aria-haspopup="menu"
            >
              Datingtips
            </summary>
            <div role="menu" class="absolute right-0 z-20 mt-2 w-72 rounded-xl border border-neutral-200 bg-white p-2 shadow-lg">
              <ul>
                <li>
                  <a role="menuitem" href="/tips/veilig-daten/" class="block rounded-md px-3 py-2 text-sm hover:bg-neutral-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600">
                    Veilig daten (18+)
                  </a>
                </li>
                <li>
                  <a role="menuitem" href="/tips/eerste-bericht/" class="block rounded-md px-3 py-2 text-sm hover:bg-neutral-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600">
                    Het eerste bericht
                  </a>
                </li>
                <li>
                  <a role="menuitem" href="/tips/afspreken/" class="block rounded-md px-3 py-2 text-sm hover:bg-neutral-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600">
                    Afspreken: do’s & don’ts
                  </a>
                </li>
              </ul>
            </div>
          </details>
        </li>

        <!-- Socials -->
        <li class="relative">
          <details class="group">
            <summary
              class="cursor-pointer list-none rounded-md px-3 py-2 text-sm font-medium hover:bg-neutral-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600"
              aria-haspopup="menu"
            >
              Socials
            </summary>
            <div role="menu" class="absolute right-0 z-20 mt-2 min-w-56 rounded-xl border border-neutral-200 bg-white p-2 shadow-lg">
              <ul class="flex items-center gap-3 px-2 py-1">
                <li>
                  <a
                    role="menuitem"
                    href="https://facebook.com/contactoproepjes"
                    target="_blank"
                    rel="noopener nofollow"
                    aria-label="Volg ons op Facebook"
                    class="inline-flex items-center gap-2 rounded-md px-2 py-1 hover:bg-neutral-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600"
                  >
                    <img src="/img/fb.png" width="20" height="20" alt="" />
                    <span class="text-sm">Facebook</span>
                  </a>
                </li>
                <li>
                  <a
                    role="menuitem"
                    href="https://www.instagram.com/oproepjes_nederland"
                    target="_blank"
                    rel="noopener nofollow"
                    aria-label="Volg ons op Instagram"
                    class="inline-flex items-center gap-2 rounded-md px-2 py-1 hover:bg-neutral-100 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600"
                  >
                    <img src="/img/ig.png" width="20" height="20" alt="" />
                    <span class="text-sm">Instagram</span>
                  </a>
                </li>
              </ul>
            </div>
          </details>
        </li>
      </ul>
    </nav>
  </div>
</header>
