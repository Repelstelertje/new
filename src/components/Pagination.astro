---
const { current, total, basePath } = Astro.props as {
  current: number;
  total: number;
  basePath: string;
};

const createHref = (page: number) => {
  // basePath verwacht eindigend met slash, bv. "/dating-groningen/"
  if (page <= 1) return basePath;
  return `${basePath}page/${page}/`;
};

const pages = Array.from({ length: total }, (_, index) => index + 1);
---
{total > 1 && (
  <nav class="flex items-center justify-center gap-2" aria-label="Paginering">
    <a
      href={current > 1 ? createHref(current - 1) : undefined}
      aria-label="Vorige pagina"
      class={`inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-300 bg-white text-slate-700 transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 ${current === 1 ? 'cursor-not-allowed opacity-50' : 'hover:bg-slate-100'}`}
      aria-disabled={current === 1}
      tabindex={current === 1 ? -1 : undefined}
    >
      <span aria-hidden="true">‹</span>
    </a>
    <ul class="flex items-center gap-1">
      {pages.map((page) => (
        <li>
          <a
            href={createHref(page)}
            aria-current={page === current ? 'page' : undefined}
            class={`inline-flex h-10 min-w-[2.5rem] items-center justify-center rounded-full px-3 text-sm font-semibold transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 ${page === current ? 'bg-sky-600 text-white' : 'bg-white text-slate-800 hover:bg-slate-100 border border-slate-300'}`}
          >
            {page}
          </a>
        </li>
      ))}
    </ul>
    <a
      href={current < total ? createHref(current + 1) : undefined}
      aria-label="Volgende pagina"
      class={`inline-flex h-10 w-10 items-center justify-center rounded-full border border-slate-300 bg-white text-slate-700 transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-sky-600 ${current === total ? 'cursor-not-allowed opacity-50' : 'hover:bg-slate-100'}`}
      aria-disabled={current === total}
      tabindex={current === total ? -1 : undefined}
    >
      <span aria-hidden="true">›</span>
    </a>
  </nav>
)}
